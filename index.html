<!doctype html>
<html lang="uk">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Spin & Win</title>
<style>
  :root{ --muted:#b7c3c0 }
  *{box-sizing:border-box}

  /* ===== –§–û–ù =====  */ 
  body{
    margin:0;
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    color:#fff;
    background:#000 url('bg.png') center/cover no-repeat;
    background-attachment: fixed;
    min-height:100svh;
    display:flex;
    align-items:center;
    justify-content:center;
    -webkit-tap-highlight-color:transparent;
    position:relative;
    overflow:hidden;
  }
  body::before{content:"";position:fixed;inset:0;background:rgba(0,0,0,.45);z-index:0;}

  /* –ú–æ–±—ñ–ª—å–Ω–∏–π —Ñ–æ–Ω */
  @media (max-width: 640px){
    body{
      background-image: url('bg-mobile.png');
      background-attachment: scroll; /* —â–æ–± –Ω–µ —Å–º–∏–∫–∞–ª–æ—Å—å –Ω–∞ iOS */
    }
  }

  .wrap{position:relative;z-index:1;width:min(1100px,96vw);padding:clamp(12px,3vw,28px);text-align:center}

  /* –ë–Ü–õ–¨–®–ò–ô –∑–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–∞ –º–æ–±—ñ–ª—Ü—ñ */
  h1{
    margin:.2em 0 .3em;
    font-weight:900;
    font-size:clamp(28px,9vw,52px);   /* –±—É–ª–æ 6.4vw */
    line-height:1.05;
    letter-spacing:.5px;
  }
  .sub{
    margin:0 0 12px;
    color:var(--muted);
    font-size:clamp(14px,5vw,20px);   /* –±—É–ª–æ 4vw */
  }

  .board{margin:18px auto 0;display:grid;place-items:center;gap:18px}

  /* ===== –ö–æ–ª–µ—Å–æ ===== */
  .wheel-wrap{
    position:relative;
    width:clamp(320px,92vw,620px);    /* –±—É–ª–æ 300/80vw/560 ‚Äî —Ç–µ–ø–µ—Ä –±—ñ–ª—å—à–µ */
    aspect-ratio:1/1;
  }
  .wheel{
    position:absolute;inset:0;display:block;width:100%;height:100%;
    object-fit:contain;user-select:none;pointer-events:none;
    filter:drop-shadow(0 18px 40px rgba(0,0,0,.45));
    transition:transform 3.2s cubic-bezier(.17,.89,.15,1);will-change:transform;z-index:1;
  }

  /* –°—Ç—Ä—ñ–ª–∫–∞ (–≤–Ω–∏–∑) */
  .pointer{
    position:absolute;
    left:50%;
    bottom:64%;
    transform:translateX(-50%) rotate(180deg);
    width:0;height:0;
    border-left:14px solid transparent;
    border-right:14px solid transparent;
    border-top:24px solid #ff3d3d;
    filter:drop-shadow(0 -3px 0 #8b1212) drop-shadow(0 -8px 16px rgba(0,0,0,.45));
    z-index:5;
  }
  @media (max-width: 640px){
    .pointer{
      bottom:64%;                      /* —â–µ —Ç—Ä–æ—Ö–∏ –Ω–∏–∂—á–µ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω—ñ */
      border-left:12px solid transparent;
      border-right:12px solid transparent;
      border-top:20px solid #ff3d3d;
    }
  }

  /* –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞ –∫–Ω–æ–ø–∫–∞ */
  .hub{position:absolute;inset:0;display:grid;place-items:center;z-index:4;pointer-events:none}
  .btn{
    pointer-events:auto;display:grid;place-items:center;width:28%;aspect-ratio:1/1;border-radius:50%;
    background:radial-gradient(circle at 35% 35%, #b49cff, #6b49ff);
    box-shadow:0 10px 0 #3a1fb7, 0 18px 40px rgba(0,0,0,.45);
    color:#fff;font-weight:900;font-size:clamp(16px,4.4vw,24px);
    border:none;cursor:pointer;text-transform:uppercase;
  }
  .btn:active{transform:translateY(2px);box-shadow:0 8px 0 #3a1fb7, 0 16px 34px rgba(0,0,0,.45)}

  .hint{color:var(--muted);font-size:clamp(12px,3.6vw,16px)}

  /* ===== –Ø–π—Ü—è (–±–µ–π–¥–∂—ñ) ===== */
  .eggs{
    position:absolute;
    right:62%;
    top:-2%;
    width:82%;
    max-width:260px;
    aspect-ratio:4/3;
    pointer-events:none;
    z-index:3;
  }
  .egg{
    position:absolute; bottom:0; right:0;
    width:56%;
    transform-origin:50% 100%;
    opacity:0;
    transform:translateY(12px) scale(.9) rotate(-6deg);
    transition:opacity .45s ease, transform .45s ease;
    user-select:none;
    /* –º‚Äô—è–∫—à–µ –∑–æ–ª–æ—Ç–µ —Å–≤—ñ—Ç—ñ–Ω–Ω—è */
    filter: drop-shadow(0 0 3px rgba(255,215,0,.55))
            drop-shadow(0 0 12px rgba(255,215,0,.35))
            drop-shadow(0 0 24px rgba(255,200,0,.25));
  }
  .egg.show{opacity:1; transform:translateY(0) scale(1) rotate(-17deg);}
  .egg.red   {right:22%; z-index:1;}
  .egg.orange{right:10%; z-index:2; transform:translateY(12px) scale(.9) rotate(-3deg);}
  .egg.orange.show{transform:translateY(0) scale(1) rotate(15deg);}

  /* ‚Äî –º–µ–Ω—à—ñ —è–π—Ü—è –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω—ñ ‚Äî */
  @media (max-width:640px){
    .eggs{
      right:66%;
      top:-2%;
      width:68%;            /* –±—É–ª–æ 82% */
      max-width:200px;      /* –±—É–ª–æ 260px */
    }
    .egg{ width:48%; }      /* –±—É–ª–æ 56% */
    .egg.red{ right:24%; }
    .egg.orange{ right:8%; }
  }

  /* ===== –ú–æ–¥–∞–ª–∫–∞ ===== */
  .backdrop{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;align-items:center;justify-content:center;padding:20px;z-index:20;}
  .show{display:flex}
  .modal{
    width:min(520px,96vw);background:linear-gradient(180deg,#0f3a2c,#0b261d);
    border:1px solid #114536;border-radius:20px;padding:22px;box-shadow:0 20px 60px rgba(0,0,0,.6);text-align:center;
  }
  .modal h2{margin:0 0 8px;font-size:clamp(22px,6vw,28px)}
  .winline{font-weight:900;font-size:clamp(22px,7vw,36px);margin:10px 0 16px}
  .cta{
    margin-top:8px;padding:14px 16px;border-radius:12px;border:0;cursor:pointer;
    background:linear-gradient(180deg,#25f28e,#1dd181);color:#01351e;font-weight:900;font-size:18px;box-shadow:0 8px 0 #0b8b53,0 16px 28px rgba(0,0,0,.35);
  }
  .closeX{position:absolute;right:12px;top:10px;width:36px;height:36px;border-radius:10px;background:#0f3a2c;border:1px solid #1b5b46;color:#9fe9c7;font-weight:900;cursor:pointer;}
</style>
</head>
<body>
  <div class="wrap">
    <h1 id="t_title">SPIN THE WHEEL</h1>
    <p class="sub" id="t_sub">–£ —Ç–µ–±–µ —î 3 —Å–ø—Ä–æ–±–∏! –ù–µ –ø—Ä–æ–ø—É—Å—Ç–∏ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å!</p>

    <div class="board">
      <div class="wheel-wrap">
        <div class="pointer"></div>

        <!-- PNG –∫–æ–ª–µ—Å–æ -->
        <img id="wheel" class="wheel" src="wheel.png" alt="Wheel">

        <!-- –Ø–π—Ü—è/–±–µ–π–¥–∂—ñ -->
        <div class="eggs" aria-hidden="true">
          <img id="eggRed"    class="egg red"    src="egg-red.png"    alt="" draggable="false">
          <img id="eggOrange" class="egg orange" src="egg-orange.png" alt="" draggable="false">
        </div>

        <!-- –¶–µ–Ω—Ç—Ä-–∫–Ω–æ–ø–∫–∞ -->
        <div class="hub"><button id="spinBtn" class="btn">Spin</button></div>
      </div>

      <div id="hint" class="hint">LEGENDS</div>
    </div>
  </div>

  <!-- Modal -->
  <div id="backdrop" class="backdrop" role="dialog" aria-modal="true" aria-labelledby="winTitle">
    <div class="modal">
      <button id="closeX" class="closeX">‚úï</button>
      <h2 id="t_modal_title">üéâ –í—ñ—Ç–∞—î–º–æ!</h2>
      <div id="t_modal_text" class="winline">–í–∏ –≤–∏–≥—Ä–∞–ª–∏ 150% –¥–æ –¥–µ–ø–æ–∑–∏—Ç—É —Ç–∞ 250 —Ñ—Ä—ñ—Å–ø—ñ–Ω—ñ–≤!</div>
      <button id="claimBtn" class="cta">–ó–∞–±—Ä–∞—Ç–∏ –≤–∏–≥—Ä–∞—à</button>
    </div>
  </div>

<script>
(() => {
  /* ---------- I18N (—Å–∫–æ—Ä–æ—á–µ–Ω–æ) ---------- */
  const I18N = {
    uk:{title:'SPIN THE WHEEL',sub:'–£ —Ç–µ–±–µ —î 3 —Å–ø—Ä–æ–±–∏! –ù–µ –ø—Ä–æ–ø—É—Å—Ç–∏ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å!',spin:'Spin',hintStart:'LEGENDS',
        tryAgainHint:'–©–µ —Ä–∞–∑ —Å–ø—Ä–æ–±—É–π ‚Äî –º–∞–π–∂–µ –≤–∏–π—à–ª–æ!',winHint:'–í—ñ—Ç–∞—î–º–æ! –¢–∏ –≤–∏–≥—Ä–∞–≤ üéÅ',
        modalTitle:'üéâ –í—ñ—Ç–∞—î–º–æ!',modalText:'–í–∏ –≤–∏–≥—Ä–∞–ª–∏ 150% –¥–æ –¥–µ–ø–æ–∑–∏—Ç—É —Ç–∞ 250 —Ñ—Ä—ñ—Å–ø—ñ–Ω—ñ–≤!',claim:'–ó–∞–±—Ä–∞—Ç–∏ –≤–∏–≥—Ä–∞—à'},
    de:{title:'DREHE DAS RAD',sub:'Du hast 3 Versuche! Verpasse deine Chance nicht!',spin:'Drehen',hintStart:'LEGENDS',
        tryAgainHint:'Versuch‚Äôs noch einmal ‚Äî fast geschafft!',winHint:'Gl√ºckwunsch! Du hast gewonnen üéÅ',
        modalTitle:'üéâ Gl√ºckwunsch!',modalText:'Du hast 150% auf die Einzahlung und 250 Freispiele gewonnen!',claim:'Bonus abholen'},
    en:{title:'SPIN THE WHEEL',sub:'You have 3 attempts! Don‚Äôt miss your chance!',spin:'Spin',hintStart:'LEGENDS',
        tryAgainHint:'Try again ‚Äî almost there!',winHint:'Congrats! You‚Äôve won üéÅ',
        modalTitle:'üéâ Congratulations!',modalText:'You won 150% deposit boost and 250 free spins!',claim:'Claim reward'}
  };
  function langFromCountry(cc){cc=(cc||'').toUpperCase();if(['DE','AT','CH','LI','LU'].includes(cc))return'de';return null;}
  async function detectLang(){
    const urlLang=new URLSearchParams(location.search).get('lang');
    if(urlLang&&I18N[urlLang])return urlLang;
    try{
      const r=await fetch('https://ipapi.co/json/',{cache:'no-store'});if(r.ok){const d=await r.json();
        const cc=d.country||d.country_code;const byCC=langFromCountry(cc);if(byCC)return byCC;
        if((d.languages||'').toLowerCase().includes('de'))return'de';
      }
    }catch(_){}
    const nav=(navigator.language||'').toLowerCase();
    if(nav.startsWith('de'))return'de'; if(nav.startsWith('en'))return'en';
    return 'uk';
  }
  function applyI18n(code){
    const t=I18N[code]||I18N.uk;
    document.getElementById('t_title').textContent=t.title;
    document.getElementById('t_sub').textContent=t.sub;
    document.getElementById('spinBtn').textContent=t.spin;
    document.getElementById('hint').textContent=t.hintStart;
    document.getElementById('t_modal_title').textContent=t.modalTitle;
    document.getElementById('t_modal_text').textContent=t.modalText;
    document.getElementById('claimBtn').textContent=t.claim;
    document.documentElement.lang=code;
    return t;
  }

  /* ---------- –ö–æ–ª–µ—Å–æ (1-–π —Å–ø—ñ–Ω TRY AGAIN, 2-–π ‚Äî WIN 250 FS) ---------- */
  const INDEX_TRY  = 1; // —á–µ—Ä–≤–æ–Ω–∏–π TRY AGAIN
  const INDEX_WIN  = 5; // 250 FS (—Ç–≤—ñ–π —Å–µ–∫—Ç–æ—Ä –∑–≤–µ—Ä—Ö—É –Ω–∞ –¥—Ä—É–≥–æ–º—É —Å–ø—ñ–Ω—ñ)
  const EXTRA_SPINS = 5;

  const wheel   = document.getElementById('wheel');
  const spinBtn = document.getElementById('spinBtn');
  const hint    = document.getElementById('hint');
  const backdrop= document.getElementById('backdrop');
  const closeX  = document.getElementById('closeX');
  const claimBtn= document.getElementById('claimBtn');

  // Eggs
  const eggRed    = document.getElementById('eggRed');
  const eggOrange = document.getElementById('eggOrange');

  let spinning=false, clicks=0, rot=0, T=I18N.uk;

  function angleForIndex(idx){
    const sectorCenter = idx * 45;                // –∫—É—Ç —Ü–µ–Ω—Ç—Ä–∞ —Å–µ–∫—Ç–æ—Ä—É
    return 360*EXTRA_SPINS + (360 - sectorCenter);
  }
  function spinTo(idx, cb){
    spinning=true; rot += angleForIndex(idx);
    wheel.style.transform = `rotate(${rot}deg)`;
    wheel.addEventListener('transitionend', ()=>{ spinning=false; cb && cb(); }, {once:true});
  }
  function openModal(){ backdrop.classList.add('show'); }
  function closeModal(){ backdrop.classList.remove('show'); }

  spinBtn.addEventListener('click', () => {
    if (spinning) return;
    clicks++;

    if (clicks === 1){
      hint.textContent = T.tryAgainHint;
      spinTo(INDEX_TRY, () => {
        eggRed.classList.add('show');
      });
    } else if (clicks === 2){
      spinTo(INDEX_WIN, () => {
        eggOrange.classList.add('show');
        hint.textContent = T.winHint;
        setTimeout(() => { openModal(); }, 2000);   // 2 —Å–µ–∫ –∑–∞—Ç—Ä–∏–º–∫–∞
      });
    }
  });

  closeX.addEventListener('click', closeModal);
  backdrop.addEventListener('click', e => { if (e.target === backdrop) closeModal(); });
  claimBtn.addEventListener('click', () => { closeModal(); /* —Ç—É—Ç –º–æ–∂–Ω–∞ –∑—Ä–æ–±–∏—Ç–∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç */ });

  (async () => { T = applyI18n(await detectLang()); })();

  ['wheel.png','egg-red.png','egg-orange.png'].forEach(s=>{const i=new Image();i.src=s;});
})();
</script>
</body>
</html>

</html>
